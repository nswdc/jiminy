<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pipeline &mdash; jiminy 1.7.16 documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Envs" href="../envs/index.html" />
    <link rel="prev" title="Block" href="block_bases.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            jiminy
              <img src="../../../../_static/jiminy_logo.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.7.16
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">README</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html">Key features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html#gym-jiminy">Gym Jiminy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html#demo">Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../README.html#getting-started">Getting started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">INSTALLATION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../INSTALL.html">Easy-install on Ubuntu 18+</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../INSTALL.html#building-from-source">Building from source</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TUTORIALS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial.html">An introduction to Jiminy</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API DOC</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../jiminy/index.html">Jiminy C++ API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../jiminy_py/index.html">Jiminy Python API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Gym Jiminy API</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Bases</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="generic_bases.html">Generic</a></li>
<li class="toctree-l3"><a class="reference internal" href="block_bases.html">Block</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Pipeline</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper"><code class="docutils literal notranslate"><span class="pre">BasePipelineWrapper</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv"><code class="docutils literal notranslate"><span class="pre">ObservedJiminyEnv</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv"><code class="docutils literal notranslate"><span class="pre">ControlledJiminyEnv</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../envs/index.html">Envs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline.html">Pipeline</a></li>
<li class="toctree-l2"><a class="reference internal" href="../controllers/index.html">Controllers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../wrappers/index.html">Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../utils/index.html">Utils</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Specifications</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../spec/src/tlmc_format_specification.html">HDF5 telemetry log format (TLMC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../spec/pdf/index.html">Downloadable PDF</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">jiminy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Gym Jiminy API</a></li>
          <li class="breadcrumb-item"><a href="index.html">Bases</a></li>
      <li class="breadcrumb-item active">Pipeline</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/api/gym_jiminy/common/bases/pipeline_bases.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-gym_jiminy.common.bases.pipeline_bases">
<span id="pipeline"></span><h1>Pipeline<a class="headerlink" href="#module-gym_jiminy.common.bases.pipeline_bases" title="Permalink to this heading">¶</a></h1>
<p>This method gathers base implementations for blocks to be used in pipeline
control design.</p>
<p>It implements:
- the concept of block thats can be connected to a <cite>BaseJiminyEnv</cite> environment</p>
<blockquote>
<div><p>through multiple <cite>JiminyEnvInterface</cite> indirections</p>
</div></blockquote>
<ul class="simple">
<li><p>a base controller block, along with a concrete PD controller</p></li>
<li><p>a wrapper to combine a controller block and a <cite>BaseJiminyEnv</cite> environment,
eventually already wrapped, so that it appears as a black-box environment.</p></li>
</ul>
<dl class="py class">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gym_jiminy.common.bases.pipeline_bases.</span></span><span class="sig-name descname"><span class="pre">BasePipelineWrapper</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.JiminyEnvInterface" title="gym_jiminy.common.bases.generic_bases.JiminyEnvInterface"><code class="xref py py-class docutils literal notranslate"><span class="pre">JiminyEnvInterface</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">ObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ActT</span></code>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">ObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ActT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseActT</span></code>]</p>
<p>Base class for wrapping a <cite>BaseJiminyEnv</cite> Gym environment so that it
appears as a single, unified, environment. The environment may have been
wrapped multiple times already.</p>
<p>If several successive blocks must be composed, just wrap each of them
successively one by one.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This architecture is not designed for trainable blocks, but rather for
robotic-oriented controllers and observers, such as PID controllers,
inverse kinematics, Model Predictive Control (MPC), sensor fusion…
It is recommended to add the controllers and observers into the
policy itself if they have to be trainable.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>kwargs</strong> – Extra keyword arguments for multiple inheritance.</p>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.simulator">
<span class="sig-name descname"><span class="pre">simulator</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../../jiminy_py/simulator.html#jiminy_py.simulator.Simulator" title="jiminy_py.simulator.Simulator"><span class="pre">Simulator</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.simulator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.robot">
<span class="sig-name descname"><span class="pre">robot</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.Robot</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.robot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.stepper_state">
<span class="sig-name descname"><span class="pre">stepper_state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.StepperState</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.stepper_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.system_state">
<span class="sig-name descname"><span class="pre">system_state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.SystemState</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.system_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.sensors_data">
<span class="sig-name descname"><span class="pre">sensors_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">SensorsDataType</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.sensors_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.is_simulation_running">
<span class="sig-name descname"><span class="pre">is_simulation_running</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">npt.NDArray</span><span class="p"><span class="pre">[</span></span><span class="pre">np.bool_</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.is_simulation_running" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.env">
<span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.JiminyEnvInterface" title="gym_jiminy.common.bases.generic_bases.JiminyEnvInterface"><span class="pre">JiminyEnvInterface</span></a><span class="p"><span class="pre">[</span></span><span class="pre">BaseObsT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">BaseActT</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.env" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.action">
<span class="sig-name descname"><span class="pre">action</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ActT</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.action" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.spec">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">spec</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">EnvSpec</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Random number generator of the base environment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.np_random">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">np_random</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Generator</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.np_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Random number generator of the base environment.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.unwrapped">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unwrapped</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.JiminyEnvInterface" title="gym_jiminy.common.bases.generic_bases.JiminyEnvInterface"><span class="pre">JiminyEnvInterface</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.unwrapped" title="Permalink to this definition">¶</a></dt>
<dd><p>Base environment of the pipeline.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.step_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">step_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.step_dt" title="Permalink to this definition">¶</a></dt>
<dd><p>Get timestep of a single ‘step’.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.is_training">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_training</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.is_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the environment is in ‘train’ or ‘eval’ mode.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper.train"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the environment in training mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper.eval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the environment in evaluation mode.</p>
<p>This only has an effect on certain environments. It can be used for
instance to enable clipping or filtering of the action at evaluation
time specifically. See documentations of a given environment for
details about their behaviors in training and evaluation modes.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the unified environment.</p>
<p>In practice, it resets the environment and initializes the generic
pipeline internal buffers through the use of ‘controller_hook’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>controller_hook</strong> – Used internally for chaining multiple
<cite>BasePipelineWrapper</cite>. It is not meant to be
defined manually.
Optional: None by default.</p></li>
<li><p><strong>kwargs</strong> – Extra keyword arguments to comply with OpenAI Gym API.</p></li>
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, StructNested[ValueT]] | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[StructNested[ValueT]] | <em>ndarray</em>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper.step"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a simulation step for a given action.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>action</strong> (<em>ActT</em>) – Next action to perform. <cite>None</cite> to not update it.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Next observation, reward, status of the episode (done or
not), and a dictionary of extra information.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, StructNested[ValueT]] | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[StructNested[ValueT]] | <em>ndarray</em>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.SupportsFloat" title="(in Python v3.11)"><em>SupportsFloat</em></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._setup">
<span class="sig-name descname"><span class="pre">_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper._setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the wrapper.</p>
<p>By default, it only resets some internal buffers.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This method must be called once, after the environment has been
reset. This is done automatically when calling <cite>reset</cite> method.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.render">
<span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper.render"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the unified environment.</p>
<p>By default, it does nothing but forwarding the request to the base
environment. This behavior can be overwritten by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>RenderFrame</em> | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a>[<em>RenderFrame</em>] | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#BasePipelineWrapper.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the wrapper and its base environment.</p>
<p>By default, it does nothing but forwarding the request to the base
environment. This behavior can be overwritten by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._abc_impl">
<span class="sig-name descname"><span class="pre">_abc_impl</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;_abc_data</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._controller_handle">
<span class="sig-name descname"><span class="pre">_controller_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._controller_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Thin wrapper around user-specified <cite>refresh_observation</cite> and
<cite>compute_command</cite> methods.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is not supposed to be called manually nor overloaded.
It will be used by the base environment to instantiate a
<cite>jiminy.ControllerFunctor</cite> that will be responsible for refreshing
observations and compute commands of all the way through a given
pipeline in the correct order of the blocks to finally sends
command motor torques directly to the robot.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Current simulation time.</p></li>
<li><p><strong>q</strong> (<em>ndarray</em>) – Current actual configuration of the robot. Note that it is
not the one of the theoretical model even if
‘use_theoretical_model’ is enabled for the backend Python
<cite>Simulator</cite>.</p></li>
<li><p><strong>v</strong> (<em>ndarray</em>) – Current actual velocity vector.</p></li>
<li><p><strong>sensors_data</strong> (<a class="reference internal" href="../../../jiminy_py/core/robot.html#jiminy_py.core.sensorsData" title="jiminy_py.core.sensorsData"><em>sensorsData</em></a>) – Current sensor data.</p></li>
<li><p><strong>command</strong> (<em>ndarray</em>) – Output argument corresponding to motors torques to
apply on the robot. It must be updated by reference
using <cite>[:]</cite> or <cite>np.copyto</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Motors torques to apply on the robot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._initialize_action_space">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_initialize_action_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._initialize_action_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the action space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._initialize_observation_space">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">_initialize_observation_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._initialize_observation_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the observation space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._is_protocol">
<span class="sig-name descname"><span class="pre">_is_protocol</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._is_protocol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._np_random">
<span class="sig-name descname"><span class="pre">_np_random</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">np.random.Generator</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._np_random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._observer_handle">
<span class="sig-name descname"><span class="pre">_observer_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper._observer_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Thin wrapper around user-specified <cite>refresh_observation</cite> method.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is not supposed to be called manually nor overloaded.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Current simulation time.</p></li>
<li><p><strong>q</strong> (<em>ndarray</em>) – Current actual configuration of the robot. Note that it is
not the one of the theoretical model even if
‘use_theoretical_model’ is enabled for the backend Python
<cite>Simulator</cite>.</p></li>
<li><p><strong>v</strong> (<em>ndarray</em>) – Current actual velocity vector.</p></li>
<li><p><strong>sensors_data</strong> (<a class="reference internal" href="../../../jiminy_py/core/robot.html#jiminy_py.core.sensorsData" title="jiminy_py.core.sensorsData"><em>sensorsData</em></a>) – Current sensor data.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.compute_command">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">compute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.compute_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the action to perform by the subsequent block, namely a
lower-level controller, if any, or the environment to ultimately
control, based on a given high-level action.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The controller is supposed to be already fully configured whenever
this method might be called. Thus it can only be called manually
after <cite>reset</cite>. This method has to deal with the initialization of
the internal state, but <cite>_setup</cite> method does so.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The user is expected to fetch by itself the observation of the
environment if necessary to carry out its computations by calling
<cite>self.env.observation</cite>. Beware it will NOT contain any information
provided by higher-level blocks in the pipeline.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target</strong> – Target to achieve by means of the output action.</p></li>
<li><p><strong>action</strong> (<em>ActT</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Action to perform.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>BaseActT</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.compute_reward">
<span class="sig-name descname"><span class="pre">compute_reward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">done</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.compute_reward" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the reward related to a specific control block.</p>
<p>For the corresponding MDP to be stationary, the computation of the
reward is supposed to involve only the transition from previous to
current state of the simulation (possibly comprising multiple agents)
under the ongoing action.</p>
<p>By default, it returns 0.0 no matter what. It is up to the user to
provide a dedicated reward function whenever appropriate.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only returning an aggregated scalar reward is supported. Yet, it is
possible to update ‘info’ by reference if one wants for keeping
track of individual reward components or any kind of extra info
that may be helpful for monitoring or debugging purposes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>done</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether the episode has reached one of terminal states of
the MDP at the current step. This flag can be used to
compute a specific terminal reward.</p></li>
<li><p><strong>truncated</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether a truncation condition outside the scope of
the MDP has been satisfied at the current step. This
flag can be used to adapt the reward.</p></li>
<li><p><strong>info</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em>) – Dictionary of extra information for monitoring.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Aggregated reward for the current step.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.control_dt">
<span class="sig-name descname"><span class="pre">control_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.control_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.observe_dt">
<span class="sig-name descname"><span class="pre">observe_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.observe_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.refresh_observation">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">refresh_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">measurement</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.refresh_observation" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute observed features based on the current simulation state and
lower-level measure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>measurement</strong> (<em>BaseObsT</em>) – Low-level measure from the environment to process
to get higher-level observation.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.render_mode">
<span class="sig-name descname"><span class="pre">render_mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.render_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.reward_range">
<span class="sig-name descname"><span class="pre">reward_range</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">(-inf,</span> <span class="pre">inf)</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.reward_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.observation_space">
<span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">gym.Space</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.observation_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.observation">
<span class="sig-name descname"><span class="pre">observation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ObsT</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.observation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">gym.Space</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper.action_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gym_jiminy.common.bases.pipeline_bases.</span></span><span class="sig-name descname"><span class="pre">ObservedJiminyEnv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observer</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ObservedJiminyEnv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper" title="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasePipelineWrapper</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ActT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ActT</span></code>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ActT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseObsT</span></code>]</p>
<p>Wrap a <cite>BaseJiminyEnv</cite> Gym environment and a single observer.</p>
<a class="reference internal image-reference" href="../../../../_images/aafig-7565b0d7eea7517aeff19901809927af5f1ca2ad.svg"><img alt="../../../../_images/aafig-7565b0d7eea7517aeff19901809927af5f1ca2ad.svg" height="160.0" src="../../../../_images/aafig-7565b0d7eea7517aeff19901809927af5f1ca2ad.svg" width="986.0" /></a>
<p>The input ‘mes_1’ of the ‘observer_1’ must be consistent with the
observation ‘obs_1’ of the environment. The observation space of the
resulting unified environment will be the observation space of the
highest-level observer, while its action space will be the one of the
unwrapped environment ‘env’.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The observation space gathers the original observation of the
environment with the high-level features computed by the observer
in <cite>gym.spaces.Dict</cite> instance. If the original observation is already
a <cite>gym.spaces.Dict</cite> instance, then the features computed by the
observer are added to if under (nested) key [‘features’, observer.name]
along with its internal state [‘states’, observer.name] if any.
Otherwise, the original observation is stored under key ‘measurement’.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The environment and the observers all have their own update period.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This design is not suitable for learning the observer, but rather for
robotic-oriented observers, such as sensor fusion algorithms, Kalman
filters… It is recommended to add the observer into the policy itself
if it has to be trainable.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – Environment to control. It can be an already controlled
environment wrapped in <cite>ObservedJiminyEnv</cite> if one desires
to stack several controllers with <cite>BaseJiminyEnv</cite>.</p></li>
<li><p><strong>observer</strong> – Observer to use to extract higher-level features.</p></li>
<li><p><strong>kwargs</strong> – Extra keyword arguments to allow automatic pipeline
wrapper generation.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.observation">
<span class="sig-name descname"><span class="pre">observation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ObsT</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.observation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._setup">
<span class="sig-name descname"><span class="pre">_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ObservedJiminyEnv._setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the wrapper.</p>
<p>In addition to the base implementation, it configures the observer.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._initialize_action_space">
<span class="sig-name descname"><span class="pre">_initialize_action_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ObservedJiminyEnv._initialize_action_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._initialize_action_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the action space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._initialize_observation_space">
<span class="sig-name descname"><span class="pre">_initialize_observation_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ObservedJiminyEnv._initialize_observation_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._initialize_observation_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the observation space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.refresh_observation">
<span class="sig-name descname"><span class="pre">refresh_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">measurement</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ObservedJiminyEnv.refresh_observation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.refresh_observation" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute high-level features based on the current wrapped
environment’s observation.</p>
<p>It gathers the original observation from the environment with the
features computed by the observer.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Internally, it can deal with multiple observers with different
update periods. Besides, it is safe to call this method multiple
times successively.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>measurement</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>StructNested</em><em>[</em><em>ValueT</em><em>]</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><em>StructNested</em><em>[</em><em>ValueT</em><em>]</em><em>] </em><em>| </em><em>ndarray</em>) – </p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.compute_command">
<span class="sig-name descname"><span class="pre">compute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ObservedJiminyEnv.compute_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.compute_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the motors efforts to apply on the robot.</p>
<p>It simply forwards the command computed by the wrapped environment
without any processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>action</strong> (<em>ActT</em>) – High-level target to achieve by means of the command.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>ndarray</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._abc_impl">
<span class="sig-name descname"><span class="pre">_abc_impl</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;_abc_data</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._controller_handle">
<span class="sig-name descname"><span class="pre">_controller_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._controller_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Thin wrapper around user-specified <cite>refresh_observation</cite> and
<cite>compute_command</cite> methods.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is not supposed to be called manually nor overloaded.
It will be used by the base environment to instantiate a
<cite>jiminy.ControllerFunctor</cite> that will be responsible for refreshing
observations and compute commands of all the way through a given
pipeline in the correct order of the blocks to finally sends
command motor torques directly to the robot.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Current simulation time.</p></li>
<li><p><strong>q</strong> (<em>ndarray</em>) – Current actual configuration of the robot. Note that it is
not the one of the theoretical model even if
‘use_theoretical_model’ is enabled for the backend Python
<cite>Simulator</cite>.</p></li>
<li><p><strong>v</strong> (<em>ndarray</em>) – Current actual velocity vector.</p></li>
<li><p><strong>sensors_data</strong> (<a class="reference internal" href="../../../jiminy_py/core/robot.html#jiminy_py.core.sensorsData" title="jiminy_py.core.sensorsData"><em>sensorsData</em></a>) – Current sensor data.</p></li>
<li><p><strong>command</strong> (<em>ndarray</em>) – Output argument corresponding to motors torques to
apply on the robot. It must be updated by reference
using <cite>[:]</cite> or <cite>np.copyto</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Motors torques to apply on the robot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._is_protocol">
<span class="sig-name descname"><span class="pre">_is_protocol</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._is_protocol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._np_random">
<span class="sig-name descname"><span class="pre">_np_random</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">np.random.Generator</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._np_random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._observer_handle">
<span class="sig-name descname"><span class="pre">_observer_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv._observer_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Thin wrapper around user-specified <cite>refresh_observation</cite> method.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is not supposed to be called manually nor overloaded.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Current simulation time.</p></li>
<li><p><strong>q</strong> (<em>ndarray</em>) – Current actual configuration of the robot. Note that it is
not the one of the theoretical model even if
‘use_theoretical_model’ is enabled for the backend Python
<cite>Simulator</cite>.</p></li>
<li><p><strong>v</strong> (<em>ndarray</em>) – Current actual velocity vector.</p></li>
<li><p><strong>sensors_data</strong> (<a class="reference internal" href="../../../jiminy_py/core/robot.html#jiminy_py.core.sensorsData" title="jiminy_py.core.sensorsData"><em>sensorsData</em></a>) – Current sensor data.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the wrapper and its base environment.</p>
<p>By default, it does nothing but forwarding the request to the base
environment. This behavior can be overwritten by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.compute_reward">
<span class="sig-name descname"><span class="pre">compute_reward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">done</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.compute_reward" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the reward related to a specific control block.</p>
<p>For the corresponding MDP to be stationary, the computation of the
reward is supposed to involve only the transition from previous to
current state of the simulation (possibly comprising multiple agents)
under the ongoing action.</p>
<p>By default, it returns 0.0 no matter what. It is up to the user to
provide a dedicated reward function whenever appropriate.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only returning an aggregated scalar reward is supported. Yet, it is
possible to update ‘info’ by reference if one wants for keeping
track of individual reward components or any kind of extra info
that may be helpful for monitoring or debugging purposes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>done</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether the episode has reached one of terminal states of
the MDP at the current step. This flag can be used to
compute a specific terminal reward.</p></li>
<li><p><strong>truncated</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether a truncation condition outside the scope of
the MDP has been satisfied at the current step. This
flag can be used to adapt the reward.</p></li>
<li><p><strong>info</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em>) – Dictionary of extra information for monitoring.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Aggregated reward for the current step.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.control_dt">
<span class="sig-name descname"><span class="pre">control_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.control_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the environment in evaluation mode.</p>
<p>This only has an effect on certain environments. It can be used for
instance to enable clipping or filtering of the action at evaluation
time specifically. See documentations of a given environment for
details about their behaviors in training and evaluation modes.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.is_training">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_training</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.is_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the environment is in ‘train’ or ‘eval’ mode.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.np_random">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">np_random</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Generator</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.np_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Random number generator of the base environment.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.observe_dt">
<span class="sig-name descname"><span class="pre">observe_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.observe_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.render">
<span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the unified environment.</p>
<p>By default, it does nothing but forwarding the request to the base
environment. This behavior can be overwritten by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>RenderFrame</em> | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a>[<em>RenderFrame</em>] | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.render_mode">
<span class="sig-name descname"><span class="pre">render_mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.render_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the unified environment.</p>
<p>In practice, it resets the environment and initializes the generic
pipeline internal buffers through the use of ‘controller_hook’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>controller_hook</strong> – Used internally for chaining multiple
<cite>BasePipelineWrapper</cite>. It is not meant to be
defined manually.
Optional: None by default.</p></li>
<li><p><strong>kwargs</strong> – Extra keyword arguments to comply with OpenAI Gym API.</p></li>
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, StructNested[ValueT]] | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[StructNested[ValueT]] | <em>ndarray</em>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.reward_range">
<span class="sig-name descname"><span class="pre">reward_range</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">(-inf,</span> <span class="pre">inf)</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.reward_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.spec">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">spec</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">EnvSpec</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Random number generator of the base environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a simulation step for a given action.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>action</strong> (<em>ActT</em>) – Next action to perform. <cite>None</cite> to not update it.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Next observation, reward, status of the episode (done or
not), and a dictionary of extra information.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, StructNested[ValueT]] | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[StructNested[ValueT]] | <em>ndarray</em>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.SupportsFloat" title="(in Python v3.11)"><em>SupportsFloat</em></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.step_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">step_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.step_dt" title="Permalink to this definition">¶</a></dt>
<dd><p>Get timestep of a single ‘step’.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the environment in training mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.unwrapped">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unwrapped</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.JiminyEnvInterface" title="gym_jiminy.common.bases.generic_bases.JiminyEnvInterface"><span class="pre">JiminyEnvInterface</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.unwrapped" title="Permalink to this definition">¶</a></dt>
<dd><p>Base environment of the pipeline.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.env">
<span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.JiminyEnvInterface" title="gym_jiminy.common.bases.generic_bases.JiminyEnvInterface"><span class="pre">JiminyEnvInterface</span></a><span class="p"><span class="pre">[</span></span><span class="pre">BaseObsT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">BaseActT</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.env" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.simulator">
<span class="sig-name descname"><span class="pre">simulator</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../../jiminy_py/simulator.html#jiminy_py.simulator.Simulator" title="jiminy_py.simulator.Simulator"><span class="pre">Simulator</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.simulator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.robot">
<span class="sig-name descname"><span class="pre">robot</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.Robot</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.robot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.stepper_state">
<span class="sig-name descname"><span class="pre">stepper_state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.StepperState</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.stepper_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.system_state">
<span class="sig-name descname"><span class="pre">system_state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.SystemState</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.system_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.sensors_data">
<span class="sig-name descname"><span class="pre">sensors_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">SensorsDataType</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.sensors_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.is_simulation_running">
<span class="sig-name descname"><span class="pre">is_simulation_running</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">npt.NDArray</span><span class="p"><span class="pre">[</span></span><span class="pre">np.bool_</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.is_simulation_running" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.action">
<span class="sig-name descname"><span class="pre">action</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ActT</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.action" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.observation_space">
<span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">gym.Space</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.observation_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">gym.Space</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ObservedJiminyEnv.action_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">gym_jiminy.common.bases.pipeline_bases.</span></span><span class="sig-name descname"><span class="pre">ControlledJiminyEnv</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">env</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">controller</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augment_observation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ControlledJiminyEnv"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper" title="gym_jiminy.common.bases.pipeline_bases.BasePipelineWrapper"><code class="xref py py-class docutils literal notranslate"><span class="pre">BasePipelineWrapper</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ActT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseActT</span></code>], <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Generic" title="(in Python v3.11)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Generic</span></code></a>[<code class="xref py py-obj docutils literal notranslate"><span class="pre">NestedObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">ActT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseObsT</span></code>, <code class="xref py py-obj docutils literal notranslate"><span class="pre">BaseActT</span></code>]</p>
<p>Wrap a <cite>BaseJiminyEnv</cite> Gym environment and a single controller.</p>
<a class="reference internal image-reference" href="../../../../_images/aafig-1b3cf6954833a4f688d70f2ea00e6ea6d7af7f6c.svg"><img alt="../../../../_images/aafig-1b3cf6954833a4f688d70f2ea00e6ea6d7af7f6c.svg" height="244.0" src="../../../../_images/aafig-1b3cf6954833a4f688d70f2ea00e6ea6d7af7f6c.svg" width="1378.0" /></a>
<p>The output command ‘cmd_X’ of ‘ctrl_X’ must be consistent with the action
space ‘act_X’ of the subsequent block. The action space of the resulting
unified environment will be the action space of the highest-level
controller ‘act_N’, while its observation space will be the one of the
unwrapped environment ‘obs’. Alternatively, the later can also gather the
(stacked) action space of the successive controllers if one is to observe
the intermediary controllers’ targets.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The environment and the controllers all have their own update period.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This design is not suitable for learning the controllers ‘ctrl_X’, but
rather for robotic-oriented pre-defined and possibly model-based
controllers, such as PID control, inverse kinematics, admittance
control, or Model Predictive Control (MPC). It is recommended to add
the controllers into the policy itself if it has to be trainable.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a reminder, <cite>env.step_dt</cite> refers to the learning step period,
namely the timestep between two successive frames:</p>
<blockquote>
<div><p>[obs, reward, done, info]</p>
</div></blockquote>
<p>This definition remains true, independently of whether the
environment is wrapped with a controller using this class. On the
contrary, <cite>env.control_dt</cite> corresponds to the apparent control
update period, namely the update period of the higher-level
controller if multiple are piped together. The same goes for
<cite>env.observe_dt</cite>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>env</strong> – Environment to control. It can be an already controlled
environment wrapped in <cite>ControlledJiminyEnv</cite> if one desires
to stack several controllers with <cite>BaseJiminyEnv</cite>.</p></li>
<li><p><strong>controller</strong> – Controller to use to send targets to the subsequent
block.</p></li>
<li><p><strong>augment_observation</strong> – Whether to gather the target state of the
controller with the observation of the
environment. Regardless, the internal state
of the controller will be added if any.
Optional: Disabled by default.</p></li>
<li><p><strong>kwargs</strong> – Extra keyword arguments to allow automatic pipeline
wrapper generation.</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.action">
<span class="sig-name descname"><span class="pre">action</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ActT</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.action" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.observation">
<span class="sig-name descname"><span class="pre">observation</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">ObsT</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.observation" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._setup">
<span class="sig-name descname"><span class="pre">_setup</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ControlledJiminyEnv._setup"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._setup" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the wrapper.</p>
<p>In addition to the base implementation, it configures the controller
and registers its target to the telemetry.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._initialize_action_space">
<span class="sig-name descname"><span class="pre">_initialize_action_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ControlledJiminyEnv._initialize_action_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._initialize_action_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the action space.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._initialize_observation_space">
<span class="sig-name descname"><span class="pre">_initialize_observation_space</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ControlledJiminyEnv._initialize_observation_space"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._initialize_observation_space" title="Permalink to this definition">¶</a></dt>
<dd><p>Configure the observation space.</p>
<p>It gathers the original observation from the environment plus the
internal state to of the controller, and optionally the target computed
by the controller if requested.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._abc_impl">
<span class="sig-name descname"><span class="pre">_abc_impl</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">&lt;_abc_data</span> <span class="pre">object&gt;</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._controller_handle">
<span class="sig-name descname"><span class="pre">_controller_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">command</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._controller_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Thin wrapper around user-specified <cite>refresh_observation</cite> and
<cite>compute_command</cite> methods.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is not supposed to be called manually nor overloaded.
It will be used by the base environment to instantiate a
<cite>jiminy.ControllerFunctor</cite> that will be responsible for refreshing
observations and compute commands of all the way through a given
pipeline in the correct order of the blocks to finally sends
command motor torques directly to the robot.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Current simulation time.</p></li>
<li><p><strong>q</strong> (<em>ndarray</em>) – Current actual configuration of the robot. Note that it is
not the one of the theoretical model even if
‘use_theoretical_model’ is enabled for the backend Python
<cite>Simulator</cite>.</p></li>
<li><p><strong>v</strong> (<em>ndarray</em>) – Current actual velocity vector.</p></li>
<li><p><strong>sensors_data</strong> (<a class="reference internal" href="../../../jiminy_py/core/robot.html#jiminy_py.core.sensorsData" title="jiminy_py.core.sensorsData"><em>sensorsData</em></a>) – Current sensor data.</p></li>
<li><p><strong>command</strong> (<em>ndarray</em>) – Output argument corresponding to motors torques to
apply on the robot. It must be updated by reference
using <cite>[:]</cite> or <cite>np.copyto</cite>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Motors torques to apply on the robot.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._is_protocol">
<span class="sig-name descname"><span class="pre">_is_protocol</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._is_protocol" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._np_random">
<span class="sig-name descname"><span class="pre">_np_random</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">np.random.Generator</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._np_random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._observer_handle">
<span class="sig-name descname"><span class="pre">_observer_handle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">t</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">q</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">v</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sensors_data</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv._observer_handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Thin wrapper around user-specified <cite>refresh_observation</cite> method.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method is not supposed to be called manually nor overloaded.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>t</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><em>float</em></a>) – Current simulation time.</p></li>
<li><p><strong>q</strong> (<em>ndarray</em>) – Current actual configuration of the robot. Note that it is
not the one of the theoretical model even if
‘use_theoretical_model’ is enabled for the backend Python
<cite>Simulator</cite>.</p></li>
<li><p><strong>v</strong> (<em>ndarray</em>) – Current actual velocity vector.</p></li>
<li><p><strong>sensors_data</strong> (<a class="reference internal" href="../../../jiminy_py/core/robot.html#jiminy_py.core.sensorsData" title="jiminy_py.core.sensorsData"><em>sensorsData</em></a>) – Current sensor data.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Closes the wrapper and its base environment.</p>
<p>By default, it does nothing but forwarding the request to the base
environment. This behavior can be overwritten by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.control_dt">
<span class="sig-name descname"><span class="pre">control_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.control_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.eval">
<span class="sig-name descname"><span class="pre">eval</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.eval" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the environment in evaluation mode.</p>
<p>This only has an effect on certain environments. It can be used for
instance to enable clipping or filtering of the action at evaluation
time specifically. See documentations of a given environment for
details about their behaviors in training and evaluation modes.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.is_training">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">is_training</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><span class="pre">bool</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.is_training" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether the environment is in ‘train’ or ‘eval’ mode.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.np_random">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">np_random</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Generator</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.np_random" title="Permalink to this definition">¶</a></dt>
<dd><p>Random number generator of the base environment.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.observe_dt">
<span class="sig-name descname"><span class="pre">observe_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">-1</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.observe_dt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.refresh_observation">
<span class="sig-name descname"><span class="pre">refresh_observation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">measurement</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ControlledJiminyEnv.refresh_observation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.refresh_observation" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the unified observation based on the current wrapped
environment’s observation and controller’s target.</p>
<p>It gathers the actual observation from the environment with the target
of the controller, if requested, otherwise it forwards the observation
directly without any further processing.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Beware it shares the environment observation whenever possible
for the sake of efficiency. Despite that, it is safe to call this
method multiple times successively.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Original environment observation, eventually including
controllers targets if requested.</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>measurement</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><em>StructNested</em><em>[</em><em>ValueT</em><em>]</em><em>] </em><em>| </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a><em>[</em><em>StructNested</em><em>[</em><em>ValueT</em><em>]</em><em>] </em><em>| </em><em>ndarray</em>) – </p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.render">
<span class="sig-name descname"><span class="pre">render</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the unified environment.</p>
<p>By default, it does nothing but forwarding the request to the base
environment. This behavior can be overwritten by the user.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>RenderFrame</em> | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.List" title="(in Python v3.11)"><em>List</em></a>[<em>RenderFrame</em>] | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.render_mode">
<span class="sig-name descname"><span class="pre">render_mode</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><span class="pre">str</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.render_mode" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the unified environment.</p>
<p>In practice, it resets the environment and initializes the generic
pipeline internal buffers through the use of ‘controller_hook’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>controller_hook</strong> – Used internally for chaining multiple
<cite>BasePipelineWrapper</cite>. It is not meant to be
defined manually.
Optional: None by default.</p></li>
<li><p><strong>kwargs</strong> – Extra keyword arguments to comply with OpenAI Gym API.</p></li>
<li><p><strong>seed</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><em>int</em></a><em> | </em><em>None</em>) – </p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>] </em><em>| </em><em>None</em>) – </p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, StructNested[ValueT]] | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[StructNested[ValueT]] | <em>ndarray</em>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.reward_range">
<span class="sig-name descname"><span class="pre">reward_range</span></span><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">(-inf,</span> <span class="pre">inf)</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.reward_range" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.spec">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">spec</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">EnvSpec</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.11)"><span class="pre">None</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Random number generator of the base environment.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.step">
<span class="sig-name descname"><span class="pre">step</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.step" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a simulation step for a given action.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>action</strong> (<em>ActT</em>) – Next action to perform. <cite>None</cite> to not update it.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Next observation, reward, status of the episode (done or
not), and a dictionary of extra information.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Tuple" title="(in Python v3.11)"><em>Tuple</em></a>[<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Mapping" title="(in Python v3.11)"><em>Mapping</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, StructNested[ValueT]] | <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Iterable" title="(in Python v3.11)"><em>Iterable</em></a>[StructNested[ValueT]] | <em>ndarray</em>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.SupportsFloat" title="(in Python v3.11)"><em>SupportsFloat</em></a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)">bool</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a>[<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)">str</a>, <a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.step_dt">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">step_dt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)"><span class="pre">float</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.step_dt" title="Permalink to this definition">¶</a></dt>
<dd><p>Get timestep of a single ‘step’.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.train">
<span class="sig-name descname"><span class="pre">train</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.train" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the environment in training mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.unwrapped">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">unwrapped</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.JiminyEnvInterface" title="gym_jiminy.common.bases.generic_bases.JiminyEnvInterface"><span class="pre">JiminyEnvInterface</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.unwrapped" title="Permalink to this definition">¶</a></dt>
<dd><p>Base environment of the pipeline.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.env">
<span class="sig-name descname"><span class="pre">env</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="generic_bases.html#gym_jiminy.common.bases.generic_bases.JiminyEnvInterface" title="gym_jiminy.common.bases.generic_bases.JiminyEnvInterface"><span class="pre">JiminyEnvInterface</span></a><span class="p"><span class="pre">[</span></span><span class="pre">BaseObsT</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">BaseActT</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.env" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.simulator">
<span class="sig-name descname"><span class="pre">simulator</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../../jiminy_py/simulator.html#jiminy_py.simulator.Simulator" title="jiminy_py.simulator.Simulator"><span class="pre">Simulator</span></a></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.simulator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.robot">
<span class="sig-name descname"><span class="pre">robot</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.Robot</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.robot" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.stepper_state">
<span class="sig-name descname"><span class="pre">stepper_state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.StepperState</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.stepper_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.system_state">
<span class="sig-name descname"><span class="pre">system_state</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">jiminy.SystemState</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.system_state" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.sensors_data">
<span class="sig-name descname"><span class="pre">sensors_data</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">SensorsDataType</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.sensors_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.is_simulation_running">
<span class="sig-name descname"><span class="pre">is_simulation_running</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">npt.NDArray</span><span class="p"><span class="pre">[</span></span><span class="pre">np.bool_</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.is_simulation_running" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.observation_space">
<span class="sig-name descname"><span class="pre">observation_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">gym.Space</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.observation_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.action_space">
<span class="sig-name descname"><span class="pre">action_space</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">gym.Space</span></em><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.action_space" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.compute_command">
<span class="sig-name descname"><span class="pre">compute_command</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">action</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ControlledJiminyEnv.compute_command"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.compute_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the motors efforts to apply on the robot.</p>
<p>In practice, it updates whenever necessary:</p>
<blockquote>
<div><ul class="simple">
<li><p>the target sent to the subsequent block by the controller</p></li>
<li><p>the command send to the robot by the environment through the
subsequent block</p></li>
</ul>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>action</strong> (<em>ActT</em>) – High-level target to achieve by means of the command.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>ndarray</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.compute_reward">
<span class="sig-name descname"><span class="pre">compute_reward</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">done</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">truncated</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">info</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../../_modules/gym_jiminy/common/bases/pipeline_bases.html#ControlledJiminyEnv.compute_reward"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#gym_jiminy.common.bases.pipeline_bases.ControlledJiminyEnv.compute_reward" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the reward related to a specific control block.</p>
<p>For the corresponding MDP to be stationary, the computation of the
reward is supposed to involve only the transition from previous to
current state of the simulation (possibly comprising multiple agents)
under the ongoing action.</p>
<p>By default, it returns 0.0 no matter what. It is up to the user to
provide a dedicated reward function whenever appropriate.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only returning an aggregated scalar reward is supported. Yet, it is
possible to update ‘info’ by reference if one wants for keeping
track of individual reward components or any kind of extra info
that may be helpful for monitoring or debugging purposes.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>done</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether the episode has reached one of terminal states of
the MDP at the current step. This flag can be used to
compute a specific terminal reward.</p></li>
<li><p><strong>truncated</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.11)"><em>bool</em></a>) – Whether a truncation condition outside the scope of
the MDP has been satisfied at the current step. This
flag can be used to adapt the reward.</p></li>
<li><p><strong>info</strong> (<a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Dict" title="(in Python v3.11)"><em>Dict</em></a><em>[</em><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.11)"><em>str</em></a><em>, </em><a class="reference external" href="https://docs.python.org/3/library/typing.html#typing.Any" title="(in Python v3.11)"><em>Any</em></a><em>]</em>) – Dictionary of extra information for monitoring.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Aggregated reward for the current step.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.11)">float</a></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="block_bases.html" class="btn btn-neutral float-left" title="Block" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../envs/index.html" class="btn btn-neutral float-right" title="Envs" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Alexis Duburcq - MIT licence.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>